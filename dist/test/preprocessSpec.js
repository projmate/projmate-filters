// Generated by CoffeeScript 1.6.1
(function() {
  var FileAsset, PreProcess, Projmate, assert, factory, textAsset;

  assert = require("chai").assert;

  factory = require("../lib/preprocess");

  Projmate = require("projmate-core/dist");

  FileAsset = Projmate.FileAsset;

  PreProcess = factory(Projmate);

  textAsset = function(text) {
    return new FileAsset({
      filename: "notused.txt",
      text: text,
      parent: []
    });
  };

  describe("PreProcess", function() {
    it("should return original text in absence of directives", function(done) {
      var asset, pp;
      asset = textAsset("foobar");
      pp = new PreProcess;
      return pp.process(asset, {}, function(err, result) {
        assert.ifError(err);
        assert.equal(result, "foobar");
        return done();
      });
    });
    return it("should use defines", function(done) {
      var asset, pp;
      asset = textAsset("#ifdef FOO\nbar\n#else\nbad\n#endif\n#define WIN\n#ifdef WIN\nwindows\n#endif");
      pp = new PreProcess;
      return pp.process(asset, {
        FOO: 1
      }, function(err, result) {
        assert.ifError(err);
        assert.equal(result, "bar\nwindows");
        return done();
      });
    });
  });

}).call(this);
